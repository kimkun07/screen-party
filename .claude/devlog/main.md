# Screen Party - í”„ë¡œì íŠ¸ ì „ì²´ ì§„í–‰ ìƒí™©

> ì´ ë¬¸ì„œëŠ” screen-party í”„ë¡œì íŠ¸ì˜ ì „ì²´ ì§„í–‰ ìƒí™©ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
> í´ë¡œë“œ ì½”ë“œëŠ” ì‘ì—… ì‹œì‘ ì‹œ ì´ íŒŒì¼ì„ ë¨¼ì € ì½ê³  ì–´ë–¤ taskë¥¼ ì§„í–‰í•´ì•¼ í• ì§€ í™•ì¸í•©ë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ ê°œìš”

**screen-party**ëŠ” ì‹¤ì‹œê°„ í™”ë©´ ë“œë¡œì‰ ê³µìœ  ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

### í•µì‹¬ ì‹œë‚˜ë¦¬ì˜¤

1. **ì—°ê²° ë° ì¤€ë¹„**
   - í˜¸ìŠ¤íŠ¸: í”„ë¡œê·¸ë¨ ì‹¤í–‰ â†’ 6ìë¦¬ ì„¸ì…˜ ë²ˆí˜¸ ë°œê¸‰ â†’ ê²Œì„ ì°½ ì„ íƒ â†’ íˆ¬ëª… ì˜¤ë²„ë ˆì´ ìƒì„±
   - ê²ŒìŠ¤íŠ¸: ì„¸ì…˜ ë²ˆí˜¸ ì…ë ¥ â†’ ì ‘ì† â†’ ë””ìŠ¤ì½”ë“œ í™”ë©´ì—ì„œ ê²Œì„ ì˜ì—­ ì§€ì • (ì¢Œí‘œ ë§¤í•‘)

2. **ì‹¤ì‹œê°„ ë“œë¡œì‰**
   - ê²ŒìŠ¤íŠ¸ê°€ ë§ˆìš°ìŠ¤ë¡œ ê·¸ë¦¼ â†’ Splineìœ¼ë¡œ ë³€í™˜ â†’ ì‹¤ì‹œê°„ ì „ì†¡
   - ëª¨ë“  ì°¸ì—¬ì í™”ë©´ì— ë§¤ë„ëŸ¬ìš´ ê³¡ì„  í‘œì‹œ
   - í˜ì´ë“œì•„ì›ƒ: ë§ˆìš°ìŠ¤ë¥¼ ë–¼ë©´ 2ì´ˆ ìœ ì§€ â†’ 1ì´ˆ ë™ì•ˆ íˆ¬ëª…í•˜ê²Œ ì‚¬ë¼ì§

3. **ê³ ê¸‰ ê¸°ëŠ¥**
   - ì¥ì‹œê°„ ëª¨ë“œ: ì„ ì´ ì‚¬ë¼ì§€ì§€ ì•Šê³  ìœ ì§€ (ì „ëµ ë¸Œë¦¬í•‘ìš©)
   - ê°œë³„ ì´ˆê¸°í™”: ESC í‚¤ë¡œ ìì‹ ì´ ê·¸ë¦° ì„ ë§Œ ì œê±°
   - ìƒ‰ìƒ êµ¬ë¶„: ê° ê²ŒìŠ¤íŠ¸ë³„ íœ ìƒ‰ìƒ ì„¤ì •
   - ì°½ ê´€ë¦¬ ë™ê¸°í™”: í˜¸ìŠ¤íŠ¸ê°€ ê²Œì„ ìµœì†Œí™” ì‹œ ì˜¤ë²„ë ˆì´ë„ ìˆ¨ê¹€

### ê¸°ìˆ  ìŠ¤íƒ

- **ì–¸ì–´**: Python 3.11+
- **íŒ¨í‚¤ì§€ ê´€ë¦¬**: Poetry (monorepo)
- **ì„œë²„**: WebSocket (asyncio, websockets ë¼ì´ë¸ŒëŸ¬ë¦¬)
- **í´ë¼ì´ì–¸íŠ¸ GUI**: PyQt6 (í¬ë¡œìŠ¤ í”Œë«í¼ ì§€ì›)
- **ë“œë¡œì‰**: scipy (Spline ë³´ê°„), PyQt6 QPainter
- **ë°°í¬**:
  - ì„œë²„: Docker ì´ë¯¸ì§€
  - í´ë¼ì´ì–¸íŠ¸: PyInstaller (Windows .exe, Linux AppImage/Binary)

## Task ì§„í–‰ ìƒí™©

| ìš°ì„ ìˆœìœ„ | Task | ìƒíƒœ | ì„¤ëª… | ì˜ì¡´ì„± |
|---------|------|------|------|--------|
| P0 | project-structure | ğŸŸ¡ ì¤€ë¹„ì¤‘ | Poetry monorepo êµ¬ì¡° ì„¤ì • | - |
| P0 | session-management | ğŸŸ¡ ì¤€ë¹„ì¤‘ | ì„¸ì…˜ ìƒì„±/ê´€ë¦¬ (6ìë¦¬ ì½”ë“œ) | project-structure |
| P0 | server-core | ğŸŸ¡ ì¤€ë¹„ì¤‘ | WebSocket ì„œë²„ ê¸°ë³¸ êµ¬ì¡° | project-structure, session-management |
| P0 | client-core | ğŸŸ¡ ì¤€ë¹„ì¤‘ | í´ë¼ì´ì–¸íŠ¸ ê¸°ë³¸ GUI ë° ì—°ê²° | project-structure |
| P1 | testing | ğŸŸ¡ ì¤€ë¹„ì¤‘ | ìœ ë‹› í…ŒìŠ¤íŠ¸ (ê°„ë‹¨í•œ í´ë¦­ ì†Œí†µ) | server-core, client-core |
| P1 | server-deployment | ğŸŸ¡ ì¤€ë¹„ì¤‘ | Docker ì´ë¯¸ì§€ ë° ë°°í¬ | server-core, testing |
| P1 | client-deployment | ğŸŸ¡ ì¤€ë¹„ì¤‘ | í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰ íŒŒì¼ ë¹Œë“œ | client-core, testing |
| P2 | host-overlay | ğŸŸ¡ ì¤€ë¹„ì¤‘ | í˜¸ìŠ¤íŠ¸ íˆ¬ëª… ì˜¤ë²„ë ˆì´ | client-core, testing |
| P2 | guest-calibration | ğŸŸ¡ ì¤€ë¹„ì¤‘ | ê²ŒìŠ¤íŠ¸ ì˜ì—­ ì„¤ì • (ì¢Œí‘œ ë§¤í•‘) | client-core, testing |
| P2 | drawing-engine | ğŸŸ¡ ì¤€ë¹„ì¤‘ | ì‹¤ì‹œê°„ ë“œë¡œì‰ (Spline) | server-core, client-core, testing |
| P2 | fade-animation | ğŸŸ¡ ì¤€ë¹„ì¤‘ | í˜ì´ë“œì•„ì›ƒ ì• ë‹ˆë©”ì´ì…˜ | drawing-engine |
| P3 | persistence-mode | ğŸŸ¡ ì¤€ë¹„ì¤‘ | ì¥ì‹œê°„ ê·¸ë¦¼ ëª¨ë“œ | drawing-engine |
| P3 | color-system | ğŸŸ¡ ì¤€ë¹„ì¤‘ | ìƒ‰ìƒ ì„¤ì • ì‹œìŠ¤í…œ | drawing-engine |
| P3 | window-sync | ğŸŸ¡ ì¤€ë¹„ì¤‘ | ì°½ ê´€ë¦¬ ë™ê¸°í™” | host-overlay |

### ìƒíƒœ ë²”ë¡€

- ğŸ”´ **ì°¨ë‹¨ë¨** (Blocked): ë‹¤ë¥¸ ì‘ì—…ì´ ì™„ë£Œë˜ì–´ì•¼ ì§„í–‰ ê°€ëŠ¥
- ğŸŸ¡ **ì¤€ë¹„ì¤‘** (Not Started): ì•„ì§ ì‹œì‘ ì•ˆ í•¨
- ğŸŸ¢ **ì§„í–‰ì¤‘** (In Progress): í˜„ì¬ ì‘ì—… ì¤‘
- âœ… **ì™„ë£Œ** (Completed): ì‘ì—… ì™„ë£Œ
- â¸ï¸ **ë³´ë¥˜** (On Hold): ì„ì‹œë¡œ ì¤‘ë‹¨

## Task ì˜ì¡´ì„± ë‹¤ì´ì–´ê·¸ë¨

```
[project-structure] (P0)
    â”œâ”€> [session-management] (P0)
    â”‚       â””â”€> [server-core] (P0)
    â”‚               â””â”€> [testing] (P1) â† ê°„ë‹¨í•œ í´ë¦­ ì†Œí†µ í…ŒìŠ¤íŠ¸
    â”‚                       â”œâ”€> [server-deployment] (P1)
    â”‚                       â”œâ”€> [drawing-engine] (P2)
    â”‚                       â”‚       â”œâ”€> [fade-animation] (P2)
    â”‚                       â”‚       â”œâ”€> [persistence-mode] (P3)
    â”‚                       â”‚       â””â”€> [color-system] (P3)
    â”‚                       â”œâ”€> [host-overlay] (P2)
    â”‚                       â”‚       â””â”€> [window-sync] (P3)
    â”‚                       â””â”€> [guest-calibration] (P2)
    â”‚
    â””â”€> [client-core] (P0)
            â””â”€> [testing] (P1)
                    â””â”€> [client-deployment] (P1)
```

## í”„ë¡œì íŠ¸ êµ¬ì¡° (ì˜ˆì •)

```
screen-party/
â”œâ”€â”€ pyproject.toml              # ë£¨íŠ¸ monorepo ì„¤ì • (workspace)
â”œâ”€â”€ poetry.lock
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ pyproject.toml          # ì„œë²„ ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ screen_party_server/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ server.py       # WebSocket ì„œë²„
â”‚   â”‚       â”œâ”€â”€ session.py      # ì„¸ì…˜ ê´€ë¦¬
â”‚   â”‚       â”œâ”€â”€ models.py       # ë°ì´í„° ëª¨ë¸
â”‚   â”‚       â””â”€â”€ utils.py
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ test_server.py
â”‚       â””â”€â”€ test_session.py
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ pyproject.toml          # í´ë¼ì´ì–¸íŠ¸ ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ screen_party_client/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ main.py         # GUI ì§„ì…ì 
â”‚   â”‚       â”œâ”€â”€ gui/
â”‚   â”‚       â”‚   â”œâ”€â”€ main_window.py
â”‚   â”‚       â”‚   â”œâ”€â”€ overlay.py  # íˆ¬ëª… ì˜¤ë²„ë ˆì´
â”‚   â”‚       â”‚   â””â”€â”€ calibration.py
â”‚   â”‚       â”œâ”€â”€ network/
â”‚   â”‚       â”‚   â””â”€â”€ client.py   # WebSocket í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚       â”œâ”€â”€ drawing/
â”‚   â”‚       â”‚   â”œâ”€â”€ engine.py   # ë“œë¡œì‰ ì—”ì§„
â”‚   â”‚       â”‚   â””â”€â”€ spline.py   # Spline ë³€í™˜
â”‚   â”‚       â””â”€â”€ utils.py
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ test_overlay.py
â”‚       â””â”€â”€ test_drawing.py
â”œâ”€â”€ Dockerfile                  # ì„œë²„ Docker ì´ë¯¸ì§€
â”œâ”€â”€ docker-compose.yml          # ë¡œì»¬ í…ŒìŠ¤íŠ¸ìš©
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ .claude/
    â”œâ”€â”€ CLAUDE.md
    â””â”€â”€ devlog/
        â””â”€â”€ ...
```

## í”„ë¡œí† ì½œ ì„¤ê³„ (ì´ˆì•ˆ)

### WebSocket ë©”ì‹œì§€ í¬ë§·

```json
// ì„¸ì…˜ ìƒì„± (í˜¸ìŠ¤íŠ¸ â†’ ì„œë²„)
{
  "type": "create_session",
  "host_name": "Player1",
  "screen_resolution": {"width": 1920, "height": 1080}
}

// ì„¸ì…˜ ìƒì„± ì‘ë‹µ (ì„œë²„ â†’ í˜¸ìŠ¤íŠ¸)
{
  "type": "session_created",
  "session_id": "ABC123",
  "host_id": "uuid-1234"
}

// ì„¸ì…˜ ì°¸ì—¬ (ê²ŒìŠ¤íŠ¸ â†’ ì„œë²„)
{
  "type": "join_session",
  "session_id": "ABC123",
  "guest_name": "Player2"
}

// ì„  ì‹œì‘ (ê²ŒìŠ¤íŠ¸ â†’ ì„œë²„)
{
  "type": "line_start",
  "line_id": "uuid-5678",
  "user_id": "uuid-1234",
  "color": "#FF0000",
  "start_point": {"x": 100, "y": 200}
}

// ì„  ì—…ë°ì´íŠ¸ (ê²ŒìŠ¤íŠ¸ â†’ ì„œë²„)
{
  "type": "line_update",
  "line_id": "uuid-5678",
  "points": [
    {"x": 100, "y": 200, "t": 0.0},
    {"x": 105, "y": 205, "t": 0.1},
    {"x": 110, "y": 215, "t": 0.2}
  ]
}

// ì„  ì¢…ë£Œ (ê²ŒìŠ¤íŠ¸ â†’ ì„œë²„)
{
  "type": "line_end",
  "line_id": "uuid-5678"
}

// ì„  ì‚­ì œ (ìë™/ìˆ˜ë™) (ì„œë²„ â†’ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸)
{
  "type": "line_remove",
  "line_id": "uuid-5678",
  "fade_duration": 1.0  // ì´ˆ (0ì´ë©´ ì¦‰ì‹œ ì‚­ì œ)
}
```

## ì£¼ìš” ê¸°ìˆ  ê²°ì •

### 1. GUI í”„ë ˆì„ì›Œí¬: PyQt6

**ì„ íƒ ì´ìœ **:
- í¬ë¡œìŠ¤ í”Œë«í¼ ì§€ì› (Windows, Linux, macOS)
- íˆ¬ëª… ì˜¤ë²„ë ˆì´ ì°½ ì§€ì› (Qt::WindowStaysOnTopHint, Qt::FramelessWindowHint)
- ê³ ì„±ëŠ¥ ë“œë¡œì‰ (QPainter, QGraphicsScene)
- ì°½ ê´€ë¦¬ API (window geometry, focus events)

**ëŒ€ì•ˆ**:
- ~~Tkinter~~: íˆ¬ëª… ì˜¤ë²„ë ˆì´ ì§€ì› ë¶€ì¡±
- ~~Kivy~~: ë°ìŠ¤í¬í†± ì•±ì— ê³¼í•œ ë³µì¡ë„

### 2. í´ë¼ì´ì–¸íŠ¸ ë°°í¬: PyInstaller

**ì„ íƒ ì´ìœ **:
- ë‹¨ì¼ ì‹¤í–‰ íŒŒì¼ ìƒì„± (--onefile ì˜µì…˜)
- PyQt6 ì§€ì›
- Windows .exe ë° Linux binary ìƒì„± ê°€ëŠ¥

**ëŒ€ì•ˆ**:
- ~~py2exe~~: Windows ì „ìš©
- ~~cx_Freeze~~: PyQt6 í˜¸í™˜ì„± ì´ìŠˆ

### 3. Spline ë³´ê°„: scipy.interpolate

**ì„ íƒ ì´ìœ **:
- `scipy.interpolate.make_interp_spline()` ì‚¬ìš©
- ë¶€ë“œëŸ¬ìš´ ê³¡ì„  ìƒì„± (cubic spline)
- ì ì€ í¬ì¸íŠ¸ë¡œë„ ë§¤ë„ëŸ¬ìš´ ê²°ê³¼

### 4. WebSocket ë¼ì´ë¸ŒëŸ¬ë¦¬: websockets

**ì„ íƒ ì´ìœ **:
- asyncio ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬
- ê°„ë‹¨í•œ API
- Python í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ í˜¸í™˜ì„± ì¢‹ìŒ

## ë¸”ë¡œì»¤ ë° ì£¼ìš” ì§ˆë¬¸

### í•´ê²°ë¨
- âœ… GUI í”„ë ˆì„ì›Œí¬ ì„ íƒ: PyQt6
- âœ… í´ë¼ì´ì–¸íŠ¸ ë°°í¬ ë°©ë²•: PyInstaller
- âœ… Spline ë¼ì´ë¸ŒëŸ¬ë¦¬: scipy.interpolate

### ë¯¸í•´ê²°
- â“ ì„¸ì…˜ ID ìƒì„± ì•Œê³ ë¦¬ì¦˜: ë‹¨ìˆœ 6ìë¦¬ ëœë¤? ì¶©ëŒ ë°©ì§€ ì–´ë–»ê²Œ?
- â“ ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ ì •ì±…: ëª‡ ì´ˆ ë™ì•ˆ ì—…ë°ì´íŠ¸ ì—†ìœ¼ë©´ ì„  ì œê±°?
- â“ ìµœëŒ€ ë™ì‹œ ì ‘ì†ì ìˆ˜ ì œí•œ: ë¬´ì œí•œ? ì•„ë‹ˆë©´ ì œí•œ (ì˜ˆ: 10ëª…)?
- â“ ìƒ‰ìƒ íŒ”ë ˆíŠ¸: ë¯¸ë¦¬ ì •ì˜ëœ ìƒ‰ìƒ? ì»¤ìŠ¤í…€ RGB?

## ìµœê·¼ ì—…ë°ì´íŠ¸

### 2025-12-28 - í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •

**ì‘ì—… ë‚´ìš©**:
- CLAUDE.md ì—…ë°ì´íŠ¸ (screen-party í”„ë¡œì íŠ¸ìš©)
- devlog ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- main.md ì‘ì„± (í”„ë¡œì íŠ¸ ê°œìš”, Task ëª©ë¡, ìš°ì„ ìˆœìœ„)

**ë‹¤ìŒ ë‹¨ê³„**:
1. ê° Taskë³„ devlog íŒŒì¼ ìƒì„±
2. project-structure task ì‹œì‘ (Poetry monorepo ì„¤ì •)

---

## ë‹¤ìŒ í´ë¡œë“œ ì½”ë“œ ì„¸ì…˜ì„ ìœ„í•œ ê°€ì´ë“œ

### ì‹œì‘ ì‹œ ì½ì–´ì•¼ í•  íŒŒì¼ (ìˆœì„œëŒ€ë¡œ)
1. `.claude/devlog/main.md` (ì´ íŒŒì¼)
2. `.claude/CLAUDE.md` (í”„ë¡œì íŠ¸ ê·œì¹™)
3. í˜„ì¬ ì‘ì—… ì¤‘ì¸ taskì˜ devlog íŒŒì¼

### ì²« ë²ˆì§¸ ì‘ì—…: project-structure
- `project-structure.md` íŒŒì¼ ì°¸ì¡°
- Poetry workspace ì„¤ì • (ë£¨íŠ¸ pyproject.toml)
- ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ë…ë¦½ pyproject.toml ìƒì„±
- ê¸°ë³¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±

### ì‘ì—… ì™„ë£Œ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] í•´ë‹¹ task devlog ì—…ë°ì´íŠ¸ (TODO ì²´í¬, ì¼ê¸° ì‘ì„±)
- [ ] main.mdì˜ Task ìƒíƒœ ì—…ë°ì´íŠ¸ (ğŸŸ¡ â†’ ğŸŸ¢ â†’ âœ…)
- [ ] main.mdì˜ "ìµœê·¼ ì—…ë°ì´íŠ¸" ì„¹ì…˜ì— í•­ëª© ì¶”ê°€
- [ ] ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹ í™•ì¸: `[task] í•œê¸€ ì„¤ëª…`
